{
  "query": "\nCREATE TABLE `asset_links` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`assetId` int NOT NULL,\n\t`linkType` enum('evaluation','report','scenario','material_board','design_brief','visual') NOT NULL,\n\t`linkId` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `asset_links_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `comments` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`entityType` enum('design_brief','material_board','visual','general') NOT NULL,\n\t`entityId` int,\n\t`userId` int NOT NULL,\n\t`content` text NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `comments_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `design_briefs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`scenarioId` int,\n\t`version` int NOT NULL DEFAULT 1,\n\t`projectIdentity` json NOT NULL,\n\t`positioningStatement` text NOT NULL,\n\t`styleMood` json NOT NULL,\n\t`materialGuidance` json NOT NULL,\n\t`budgetGuardrails` json NOT NULL,\n\t`procurementConstraints` json NOT NULL,\n\t`deliverablesChecklist` json NOT NULL,\n\t`createdBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `design_briefs_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `generated_visuals` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`scenarioId` int,\n\t`type` enum('mood','material_board','hero') NOT NULL,\n\t`promptJson` json NOT NULL,\n\t`modelVersion` varchar(64) DEFAULT 'nano-banana-v1',\n\t`imageAssetId` int,\n\t`status` enum('pending','generating','completed','failed') NOT NULL DEFAULT 'pending',\n\t`errorMessage` text,\n\t`createdBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `generated_visuals_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `material_boards` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`scenarioId` int,\n\t`boardName` varchar(255) NOT NULL,\n\t`boardJson` json NOT NULL,\n\t`boardImageAssetId` int,\n\t`benchmarkVersionId` int,\n\t`createdBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `material_boards_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `materials_catalog` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`category` enum('tile','stone','wood','metal','fabric','glass','paint','wallpaper','lighting','furniture','fixture','accessory','other') NOT NULL,\n\t`tier` enum('economy','mid','premium','luxury','ultra_luxury') NOT NULL,\n\t`typicalCostLow` decimal(10,2),\n\t`typicalCostHigh` decimal(10,2),\n\t`costUnit` varchar(32) DEFAULT 'AED/sqm',\n\t`leadTimeDays` int,\n\t`leadTimeBand` enum('short','medium','long','critical') DEFAULT 'medium',\n\t`regionAvailability` json,\n\t`supplierName` varchar(255),\n\t`supplierContact` varchar(255),\n\t`supplierUrl` text,\n\t`imageUrl` text,\n\t`notes` text,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdBy` int,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `materials_catalog_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `materials_to_boards` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`boardId` int NOT NULL,\n\t`materialId` int NOT NULL,\n\t`quantity` decimal(10,2),\n\t`unitOfMeasure` varchar(32),\n\t`notes` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `materials_to_boards_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `project_assets` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`filename` varchar(512) NOT NULL,\n\t`mimeType` varchar(128) NOT NULL,\n\t`sizeBytes` int NOT NULL,\n\t`storagePath` text NOT NULL,\n\t`storageUrl` text,\n\t`checksum` varchar(128),\n\t`uploadedBy` int NOT NULL,\n\t`category` enum('brief','brand','budget','competitor','inspiration','material','sales','legal','mood_image','material_board','marketing_hero','generated','other') NOT NULL DEFAULT 'other',\n\t`tags` json,\n\t`notes` text,\n\t`isClientVisible` boolean NOT NULL DEFAULT true,\n\t`uploadedAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `project_assets_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `prompt_templates` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`type` enum('mood','material_board','hero') NOT NULL,\n\t`templateText` text NOT NULL,\n\t`variables` json NOT NULL,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdBy` int,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `prompt_templates_id` PRIMARY KEY(`id`)\n);\n\nALTER TABLE `report_instances` MODIFY COLUMN `reportType` enum('executive_pack','full_technical','tender_brief','executive_decision_pack','design_brief_rfq','marketing_starter','validation_summary','design_brief','rfq_pack','full_report','marketing_prelaunch') NOT NULL;\n\nALTER TABLE `projects` ADD `approvalState` enum('draft','review','approved_rfq','approved_marketing') DEFAULT 'draft';\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3qjjvhuo9AvMUPD.984bcc8a4c01 --database Qjy3c67dUhuYfoZUKPnMuR --execute \nCREATE TABLE `asset_links` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`assetId` int NOT NULL,\n\t`linkType` enum('evaluation','report','scenario','material_board','design_brief','visual') NOT NULL,\n\t`linkId` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `asset_links_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `comments` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`entityType` enum('design_brief','material_board','visual','general') NOT NULL,\n\t`entityId` int,\n\t`userId` int NOT NULL,\n\t`content` text NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `comments_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `design_briefs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`scenarioId` int,\n\t`version` int NOT NULL DEFAULT 1,\n\t`projectIdentity` json NOT NULL,\n\t`positioningStatement` text NOT NULL,\n\t`styleMood` json NOT NULL,\n\t`materialGuidance` json NOT NULL,\n\t`budgetGuardrails` json NOT NULL,\n\t`procurementConstraints` json NOT NULL,\n\t`deliverablesChecklist` json NOT NULL,\n\t`createdBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `design_briefs_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `generated_visuals` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`scenarioId` int,\n\t`type` enum('mood','material_board','hero') NOT NULL,\n\t`promptJson` json NOT NULL,\n\t`modelVersion` varchar(64) DEFAULT 'nano-banana-v1',\n\t`imageAssetId` int,\n\t`status` enum('pending','generating','completed','failed') NOT NULL DEFAULT 'pending',\n\t`errorMessage` text,\n\t`createdBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `generated_visuals_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `material_boards` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`scenarioId` int,\n\t`boardName` varchar(255) NOT NULL,\n\t`boardJson` json NOT NULL,\n\t`boardImageAssetId` int,\n\t`benchmarkVersionId` int,\n\t`createdBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `material_boards_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `materials_catalog` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`category` enum('tile','stone','wood','metal','fabric','glass','paint','wallpaper','lighting','furniture','fixture','accessory','other') NOT NULL,\n\t`tier` enum('economy','mid','premium','luxury','ultra_luxury') NOT NULL,\n\t`typicalCostLow` decimal(10,2),\n\t`typicalCostHigh` decimal(10,2),\n\t`costUnit` varchar(32) DEFAULT 'AED/sqm',\n\t`leadTimeDays` int,\n\t`leadTimeBand` enum('short','medium','long','critical') DEFAULT 'medium',\n\t`regionAvailability` json,\n\t`supplierName` varchar(255),\n\t`supplierContact` varchar(255),\n\t`supplierUrl` text,\n\t`imageUrl` text,\n\t`notes` text,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdBy` int,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `materials_catalog_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `materials_to_boards` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`boardId` int NOT NULL,\n\t`materialId` int NOT NULL,\n\t`quantity` decimal(10,2),\n\t`unitOfMeasure` varchar(32),\n\t`notes` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `materials_to_boards_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `project_assets` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`filename` varchar(512) NOT NULL,\n\t`mimeType` varchar(128) NOT NULL,\n\t`sizeBytes` int NOT NULL,\n\t`storagePath` text NOT NULL,\n\t`storageUrl` text,\n\t`checksum` varchar(128),\n\t`uploadedBy` int NOT NULL,\n\t`category` enum('brief','brand','budget','competitor','inspiration','material','sales','legal','mood_image','material_board','marketing_hero','generated','other') NOT NULL DEFAULT 'other',\n\t`tags` json,\n\t`notes` text,\n\t`isClientVisible` boolean NOT NULL DEFAULT true,\n\t`uploadedAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `project_assets_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `prompt_templates` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`type` enum('mood','material_board','hero') NOT NULL,\n\t`templateText` text NOT NULL,\n\t`variables` json NOT NULL,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdBy` int,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `prompt_templates_id` PRIMARY KEY(`id`)\n);\n\nALTER TABLE `report_instances` MODIFY COLUMN `reportType` enum('executive_pack','full_technical','tender_brief','executive_decision_pack','design_brief_rfq','marketing_starter','validation_summary','design_brief','rfq_pack','full_report','marketing_prelaunch') NOT NULL;\n\nALTER TABLE `projects` ADD `approvalState` enum('draft','review','approved_rfq','approved_marketing') DEFAULT 'draft';\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 6543
}